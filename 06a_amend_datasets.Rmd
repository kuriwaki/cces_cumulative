---
title: "Amend Datasets"
author: "Shiro Kuriwaki"
date: "4/8/2018"
output: html_document
---


```{r}
library(stringr)
library(crunch)
login()
```


```{r}
ds16_17 <- loadDataset("CCES Cumulative Common 2016-2017") # key
dsnew <- loadDataset("CCES Cumulative Common Dev")
```


```{r, eval = FALSE}
type(ds17$dist) <- type(ds17$dist_up) <- type(ds17$cd) <-  "categorical"

ds16_17 <- appendDataset(ds16, ds17)
cmp <- compareDatasets(ds16, ds17)
```



```{r}
covars <- setdiff(names(ds16_17), c("case_id", "year_caseid"))
deleteVariables(ds16_17, covars)
```


```{r}
type(ds16_17$year) <- "text"
ds16_17$year <- stringr::str_c(ds16_17$year, "-")
ds16_17$year_caseid <- stringr::str_c(ds16_17$year, ds16_17$case_id)
```
```{r}
dsnew$year_dash <- dsnew$year
type(dsnew$year_dash) <- "text"
dsnew$year_dash <- stringr::str_c(dsnew$year_dash, "-")
dsnew$year_caseid <- stringr::str_c(dsnew$year_dash, dsnew$case_id)
```

```{r}
# deleteVariables(ds16_17, c("year", "case_id"))
ds16_17 <- loadDataset("CCES Cumulative Common 2016-2017")
```


```{r}
joinDatasets(ds16_17, dsnew)
```



